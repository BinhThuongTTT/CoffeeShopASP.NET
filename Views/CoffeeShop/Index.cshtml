@model List<CoffeeShopWeb.Models.Product>
@{
    ViewData["Title"] = "Home";
    Layout = null;
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Coffee Shop</title>
    <link rel="stylesheet" href="~/css/style.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>
<body>

<header class="header" id="header">
    <a href="/" class="logo">
        <img src="~/images/logo.png" alt="Coffee Shop Logo">
    </a>

    <nav class="navbar">
        <a href="#home">Trang chủ</a>
        <a href="#about">Về chúng tôi</a>
        <a href="#menu">Thực đơn</a>
        <a href="#contact">Liên hệ</a>
        <a asp-controller="CoffeeShopAccount" asp-action="Login">Đăng nhập</a>
    </nav>

    <form asp-controller="CoffeeShop" asp-action="Index" method="get" class="search-form">
        <input type="search" name="searchQuery" value="@ViewBag.SearchQuery" placeholder="Tìm kiếm sản phẩm..." />
        <button type="submit"><i class="fas fa-search"></i></button>
    </form>
</header>

<!-- home -->
<section class="home" id="home">
    <div class="content">
        <h3>Cà phê tươi mỗi sáng</h3>
        <p>Khám phá hương vị đậm đà của những hạt cà phê Arabica chất lượng cao, được rang tươi mỗi ngày và pha chế bởi những barista tài năng. Trải nghiệm không gian ấm cúng và thưởng thức những ly cà phê hoàn hảo.</p>
        <a href="#menu" class="btn">Khám phá thực đơn</a>
    </div>
</section>

<!-- about -->
<section class="about" id="about">
    <h1 class="heading">Về <span>chúng tôi</span></h1>
    <div class="row">
        <div class="image">
            <img src="~/images/about-img.png" alt="Cửa hàng cà phê">
        </div>
        <div class="content">
            <h3>Điều gì làm cà phê của chúng tôi đặc biệt?</h3>
            <p>
                Tại cửa hàng của chúng tôi, chúng tôi chỉ lựa chọn những hạt cà phê Arabica chất lượng cao từ các nông trại bền vững trên khắp thế giới.
                Mỗi tách cà phê đều được các barista giàu kinh nghiệm chăm chút tỉ mỉ, mang đến hương vị đậm đà và trải nghiệm thưởng thức tuyệt vời.
                Từ hạt cà phê xay mới đến sữa đánh nóng hoàn hảo, từng chi tiết đều được chú trọng.
            </p>
            <a href="#contact" class="btn">Tìm hiểu thêm</a>
        </div>
    </div>
</section>

<!-- menu -->
<section class="menu" id="menu">
    <h1 class="heading">Thực đơn <span>của chúng tôi</span></h1>

    <!-- Advanced Search Form -->
    <div class="advanced-search" style="background: #ffffff; padding: 3rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 4rem; max-width: 100rem; margin-left: auto; margin-right: auto;">
        <form asp-controller="CoffeeShop" asp-action="Index" method="get">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(20rem, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                <div>
                    <label style="display: block; font-weight: 600; color: #8B4513; margin-bottom: 0.5rem;">Tìm kiếm:</label>
                    <input type="text" name="searchQuery" value="@ViewBag.SearchQuery" placeholder="Tên sản phẩm..."
                           style="width: 100%; padding: 1rem; border: 2px solid #f5f5f5; border-radius: 12px; font-size: 1.4rem;" />
                </div>

                <div>
                    <label style="display: block; font-weight: 600; color: #8B4513; margin-bottom: 0.5rem;">Danh mục:</label>
                    <select name="categoryId" style="width: 100%; padding: 1rem; border: 2px solid #ddd; border-radius: 12px; font-size: 1.4rem;">
                        <option value="">Tất cả danh mục</option>
                        @if (ViewBag.Categories != null)
                        {
                            @foreach (var category in ViewBag.Categories)
                            {
                                @if (ViewBag.CategoryId != null && ViewBag.CategoryId.Equals(category.Id))
                                {
                                    <option value="@category.Id" selected>@category.Name</option>
                                }
                                else
                                {
                                    <option value="@category.Id">@category.Name</option>
                                }
                            }
                        }
                    </select>
                </div>

                <div>
                    <label style="display: block; font-weight: 600; color: #8B4513; margin-bottom: 0.5rem;">Giá từ:</label>
                    <input type="number" name="minPrice" value="@ViewBag.MinPrice" placeholder="0" min="0" step="1000"
                           style="width: 100%; padding: 1rem; border: 2px solid #f5f5f5; border-radius: 12px; font-size: 1.4rem;" />
                </div>

                <div>
                    <label style="display: block; font-weight: 600; color: #8B4513; margin-bottom: 0.5rem;">Giá đến:</label>
                    <input type="number" name="maxPrice" value="@ViewBag.MaxPrice" placeholder="1000000" min="0" step="1000"
                           style="width: 100%; padding: 1rem; border: 2px solid #f5f5f5; border-radius: 12px; font-size: 1.4rem;" />
                </div>

                <div>
                    <label style="display: block; font-weight: 600; color: #8B4513; margin-bottom: 0.5rem;">Sắp xếp:</label>
                    <select name="sortBy" style="width: 100%; padding: 1rem; border: 2px solid #ddd; border-radius: 12px; font-size: 1.4rem;">
                        @{
                            var sortBy = ViewBag.SortBy as string ?? "name";
                        }
                        @if (sortBy == "name")
                        {
                            <option value="name" selected>Tên A-Z</option>
                        }
                        else
                        {
                            <option value="name">Tên A-Z</option>
                        }

                        @if (sortBy == "name_desc")
                        {
                            <option value="name_desc" selected>Tên Z-A</option>
                        }
                        else
                        {
                            <option value="name_desc">Tên Z-A</option>
                        }

                        @if (sortBy == "price_asc")
                        {
                            <option value="price_asc" selected>Giá thấp đến cao</option>
                        }
                        else
                        {
                            <option value="price_asc">Giá thấp đến cao</option>
                        }

                        @if (sortBy == "price_desc")
                        {
                            <option value="price_desc" selected>Giá cao đến thấp</option>
                        }
                        else
                        {
                            <option value="price_desc">Giá cao đến thấp</option>
                        }
                    </select>
                </div>
            </div>

            <div style="text-align: center;">
                <button type="submit" style="background: #8B4513; color: #ffffff; padding: 1.2rem 3rem; border: none; border-radius: 12px; font-size: 1.5rem; font-weight: 600; cursor: pointer; margin-right: 1rem; transition: all 0.3s;">
                    <i class="fas fa-search"></i> Tìm kiếm
                </button>
                <a asp-controller="CoffeeShop" asp-action="Index" style="background: #6c757d; color: #ffffff; padding: 1.2rem 3rem; text-decoration: none; border-radius: 12px; font-size: 1.5rem; font-weight: 600; transition: all 0.3s;">
                    <i class="fas fa-redo"></i> Đặt lại
                </a>
            </div>
        </form>
    </div>

    @if (!string.IsNullOrEmpty(ViewBag.SearchQuery) || ViewBag.CategoryId != null || ViewBag.MinPrice != null || ViewBag.MaxPrice != null)
    {
        <div style="text-align: center; margin-bottom: 3rem;">
            <p style="font-size: 1.6rem; color: #757575;">
                Tìm thấy <strong>@Model.Count</strong> sản phẩm
                @if (!string.IsNullOrEmpty(ViewBag.SearchQuery))
                {
                    <span>cho từ khóa "<strong>@ViewBag.SearchQuery</strong>"</span>
                }
            </p>
        </div>
    }

    <div class="box-container">
        @if (Model.Any())
        {
            @foreach (var product in Model)
            {
                <div class="box">
                    <img src="@(string.IsNullOrEmpty(product.ImagePath) ? "/images/default-coffee.jpg" : product.ImagePath)" alt="@product.Name" />
                    <h3>@product.Name</h3>
                    <div class="price">@product.Price.ToString("C", new System.Globalization.CultureInfo("vi-VN"))</div>
                    @if (!string.IsNullOrEmpty(product.Description))
                    {
                        <p style="font-size: 1.4rem; color: #757575; margin: 1rem 0;">@product.Description</p>
                    }
                    <a asp-controller="CoffeeShopAccount" asp-action="Login" class="btn">Đặt hàng</a>
                </div>
            }
        }
        else
        {
            <div style="grid-column: 1 / -1; text-align: center; padding: 5rem;">
                <h3 style="color: #757575; font-size: 2rem;">Không tìm thấy sản phẩm nào</h3>
                <p style="color: #757575; margin-top: 1rem;">Vui lòng thử từ khóa khác</p>
            </div>
        }
    </div>
</section>

<!-- contact section -->
<section class="contact" id="contact" style="padding: 8rem 5%; background: #FFF8E1;">
    <h1 class="heading">Liên hệ <span>với chúng tôi</span></h1>
    <div style="max-width: 80rem; margin: 0 auto; text-align: center;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(25rem, 1fr)); gap: 3rem; margin-bottom: 4rem;">
            <div style="background: #ffffff; padding: 3rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                <i class="fas fa-map-marker-alt" style="font-size: 3rem; color: #8B4513; margin-bottom: 1rem;"></i>
                <h3 style="color: #8B4513; margin-bottom: 1rem;">Địa chỉ</h3>
                <p style="color: #757575;">123 Đường ABC, Quận XYZ, TP.HCM</p>
            </div>
            <div style="background: #ffffff; padding: 3rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                <i class="fas fa-phone" style="font-size: 3rem; color: #8B4513; margin-bottom: 1rem;"></i>
                <h3 style="color: #8B4513; margin-bottom: 1rem;">Điện thoại</h3>
                <p style="color: #757575;">+84 123 456 789</p>
            </div>
            <div style="background: #ffffff; padding: 3rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                <i class="fas fa-envelope" style="font-size: 3rem; color: #8B4513; margin-bottom: 1rem;"></i>
                <h3 style="color: #8B4513; margin-bottom: 1rem;">Email</h3>
                <p style="color: #757575;">info@coffeeshop.com</p>
            </div>
        </div>
    </div>
</section>

<!-- footer -->
<footer class="footer">
    <div class="share">
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-linkedin"></i></a>
    </div>
    <p>&copy; 2024 Coffee Shop. Tất cả quyền được bảo lưu.</p>
</footer>

<script>
    // Header scroll effect
    window.addEventListener('scroll', function() {
        const header = document.getElementById('header');
        if (window.scrollY > 100) {
            header.classList.add('scrolled');
        } else {
            header.classList.remove('scrolled');
        }
    });

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
</script>

</body>
</html>
